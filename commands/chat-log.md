# 会話ログ保存

## 概要

このチャットセッションでのユーザーとClaudeのやり取りを、`~/Documents/claude-outputs/chat-logs/` ディレクトリに保存する。

## 保存先

- **ベースディレクトリ**: `~/Documents/claude-outputs/chat-logs/`
- **チャットログ**: `~/Documents/claude-outputs/chat-logs/chat_yyyymmdd_HHmm.md`
- **過去月退避先**: `~/Documents/claude-outputs/chat-logs/old`

## 実行手順

1. 本日の日付と現在時刻を取得（`yyyy-mm-dd_HHmm`）
2. `~/Documents/claude-outputs/chat-logs/` ディレクトリを作成（存在しない場合）
3. 月次アーカイブ処理
   - 当月（`yyyymm`）を算出
   - ベースディレクトリ直下の `chat_*.md` ファイルを確認
   - 当月以外のファイルが存在する場合：
     - `old/` ディレクトリを作成（存在しない場合）
     - 当月以外の `chat_*.md` ファイルを `old/` に移動（ファイル名は維持）
4. ファイル名を `chat_yyyymmdd_HHmm.md` として決定
5. このチャットセッションの会話内容を以下のフォーマットで記録

## 記載フォーマット

```text
# チャットログ

- 日時: yyyy-mm-dd HH:mm
- セッション概要: （会話の主題を1行で要約）

---

## 会話内容

### ユーザー
（ユーザーの発言）

### Claude
（Claudeの応答）

### ユーザー
（ユーザーの発言）

### Claude
（Claudeの応答）

...（以降繰り返し）

---

## セッションサマリー

### 主なトピック
- トピック1
- トピック2

### 実行されたアクション
- アクション1
- アクション2

### 未解決事項・次回への申し送り
- 事項1
- 事項2
```

## 注意事項

- 会話内容は省略せず、できるだけ忠実に記録する
- ただし、ツール実行の詳細出力（長いログなど）は要約してもよい
- 機密情報（APIキー、パスワード等）が含まれる場合は `[REDACTED]` に置換する
- コードブロックは適切にマークダウン記法で囲む
- ファイル名の重複を避けるため、時刻を含める
- チャットログは常にベースディレクトリに「当月分のみ」置き、過去月は `old/` に自動退避される
